# 要件定義書

{{PROJECT_NAME}} の要件・仕様を定義します。

<!-- 
📝 書くべき内容:
- 機能要件（FR: Functional Requirements）
- 非機能要件（NFR: Non-Functional Requirements）
- 制約条件
- 用語定義
- 優先度（MoSCoW法など）

カスタマイズ:
- プロジェクトの要件に合わせて更新
- 不要なセクションは削除
-->

## 📚 目次

1. [機能要件](#機能要件)
2. [非機能要件](#非機能要件)
3. [制約条件](#制約条件)
4. [優先度](#優先度)

---

## 機能要件

### FR1: ユーザー管理

#### FR1.1: ユーザー登録

| 項目 | 内容 |
|------|------|
| **概要** | 新規ユーザーがアカウントを作成できる |
| **アクター** | 未認証ユーザー |
| **前提条件** | なし |
| **事後条件** | ユーザーアカウントが作成される |
| **優先度** | Must |

**受け入れ基準**:
- [ ] メールアドレスとパスワードで登録できる
- [ ] 登録後、確認メールが送信される
- [ ] 重複メールアドレスはエラーになる

#### FR1.2: ログイン

| 項目 | 内容 |
|------|------|
| **概要** | 登録済みユーザーがログインできる |
| **アクター** | 登録済みユーザー |
| **前提条件** | ユーザー登録済み |
| **事後条件** | 認証セッションが作成される |
| **優先度** | Must |

**受け入れ基準**:
- [ ] メール/パスワードでログインできる
- [ ] OAuthでログインできる（Google）
- [ ] 認証失敗時、適切なエラーメッセージが表示される

<!-- 
機能要件のテンプレート:

### FR2: <!-- 機能カテゴリ名 -->

#### FR2.1: <!-- 機能名 -->

| 項目 | 内容 |
|------|------|
| **概要** | <!-- 機能の説明 --> |
| **アクター** | <!-- 誰が使うか --> |
| **前提条件** | <!-- 実行前の条件 --> |
| **事後条件** | <!-- 実行後の状態 --> |
| **優先度** | Must / Should / Could / Won't |

**受け入れ基準**:
- [ ] 基準1
- [ ] 基準2
-->

### FR2: <!-- 機能カテゴリ名 -->

<!-- 同様に記載 -->

---

## 非機能要件

### NFR1: パフォーマンス

| 項目 | 要件 |
|------|------|
| ページ読み込み時間 | 3秒以内（初回） |
| API レスポンス時間 | 500ms 以内（95パーセンタイル） |
| 同時接続ユーザー数 | 100ユーザー以上 |

### NFR2: セキュリティ

| 項目 | 要件 |
|------|------|
| 認証 | OAuth 2.0 + セッション管理 |
| 認可 | RBAC（ロールベースアクセス制御） |
| データ保護 | 通信の暗号化（HTTPS）、保存データの暗号化 |
| 脆弱性対策 | XSS, CSRF, SQL Injection 対策 |

### NFR3: 可用性

| 項目 | 要件 |
|------|------|
| SLA | 99.9%（月間ダウンタイム 43分以内） |
| バックアップ | 日次バックアップ、7日間保持 |
| 障害復旧 | RTO 4時間、RPO 1時間 |

### NFR4: スケーラビリティ

| 項目 | 要件 |
|------|------|
| ユーザー数 | 初期100ユーザー、将来10,000ユーザー対応 |
| データ量 | 初期10GB、将来1TB対応 |

### NFR5: 保守性

| 項目 | 要件 |
|------|------|
| コードカバレッジ | 70%以上 |
| ドキュメント | API仕様書、操作マニュアル |
| ログ | エラーログ、アクセスログの保存 |

---

## 制約条件

### 技術的制約

- **フレームワーク**: {{TECH_STACK}} を使用
- **データベース**: {{DB_TYPE}} を使用
- **ホスティング**: <!-- Vercel / AWS 等 -->

### ビジネス的制約

- **リリース日**: <!-- 日付 -->
- **予算**: <!-- 該当する場合 -->
- **チーム構成**: <!-- 人数、スキルセット -->

### 法的・コンプライアンス

- **個人情報保護**: <!-- GDPR / 個人情報保護法 等 -->
- **アクセシビリティ**: <!-- WCAG 2.1 AA 等 -->

---

## 優先度

### MoSCoW法による分類

| 分類 | 説明 | 対象機能 |
|------|------|---------|
| **Must** | 必須。これがないとリリースできない | FR1.1, FR1.2, ... |
| **Should** | 重要。可能な限り含める | FR2.1, ... |
| **Could** | あれば良い。リソースがあれば | FR3.1, ... |
| **Won't** | 今回は対象外 | FR4.1, ... |

---

## 関連ドキュメント

- [overview.md](./overview.md) - プロジェクト概要
- [database.md](./database.md) - DB設計
- [features/](./features/) - 機能別詳細仕様
- [../guides/40-domain-modeling.md](../guides/40-domain-modeling.md) - ドメインモデリング

---

**最終更新**: YYYY-MM-DD

